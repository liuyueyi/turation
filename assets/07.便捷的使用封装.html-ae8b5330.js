const n=JSON.parse('{"key":"v-26818b90","path":"/column/app/trace-watch-dog/07.%E4%BE%BF%E6%8D%B7%E7%9A%84%E4%BD%BF%E7%94%A8%E5%B0%81%E8%A3%85.html","title":"7. 便捷的使用封装","lang":"zh-CN","frontmatter":{"order":7,"title":"7. 便捷的使用封装","tag":["trace-watch-dog"],"category":["技术组件"],"date":"2024-08-27T18:19:48.000Z","keywords":["Java","trace"],"description":"接上文，我们现在实现的耗时分布记录工具路TraceRecoder已基本成型，接下来我们将重点放在使用层面的优化上，看一下如何给调用者提供简洁、舒适的使用体验 1. 使用侧的问题分析 现来看一下前面测试用例中的使用case @Test public void testCost2() { try (TraceRecorder recorder = new TraceRecorder()) { randSleep(\\"前置\\", 20); recorder.sync(() -&gt; randSleep(\\"task1\\", 200), \\"task1\\"); recorder.async(() -&gt; randSleep(\\"task2\\", 100), \\"task2\\"); } }","head":[["meta",{"property":"og:url","content":"https://liuyueyi.github.io/tutorial/column/app/trace-watch-dog/07.%E4%BE%BF%E6%8D%B7%E7%9A%84%E4%BD%BF%E7%94%A8%E5%B0%81%E8%A3%85.html"}],["meta",{"property":"og:site_name","content":"一灰灰的站点"}],["meta",{"property":"og:title","content":"7. 便捷的使用封装"}],["meta",{"property":"og:description","content":"接上文，我们现在实现的耗时分布记录工具路TraceRecoder已基本成型，接下来我们将重点放在使用层面的优化上，看一下如何给调用者提供简洁、舒适的使用体验 1. 使用侧的问题分析 现来看一下前面测试用例中的使用case @Test public void testCost2() { try (TraceRecorder recorder = new TraceRecorder()) { randSleep(\\"前置\\", 20); recorder.sync(() -&gt; randSleep(\\"task1\\", 200), \\"task1\\"); recorder.async(() -&gt; randSleep(\\"task2\\", 100), \\"task2\\"); } }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-28T11:39:50.000Z"}],["meta",{"property":"article:tag","content":"trace-watch-dog"}],["meta",{"property":"article:published_time","content":"2024-08-27T18:19:48.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-28T11:39:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"7. 便捷的使用封装\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-08-27T18:19:48.000Z\\",\\"dateModified\\":\\"2024-08-28T11:39:50.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"1. 使用侧的问题分析","slug":"_1-使用侧的问题分析","link":"#_1-使用侧的问题分析","children":[{"level":3,"title":"1.1 嵌套的耗时记录方式","slug":"_1-1-嵌套的耗时记录方式","link":"#_1-1-嵌套的耗时记录方式","children":[]},{"level":3,"title":"1.2 传参方式","slug":"_1-2-传参方式","link":"#_1-2-传参方式","children":[]},{"level":3,"title":"1.3 上下文维护TraceRecoder","slug":"_1-3-上下文维护tracerecoder","link":"#_1-3-上下文维护tracerecoder","children":[]}]},{"level":2,"title":"2. 使用优化","slug":"_2-使用优化","link":"#_2-使用优化","children":[{"level":3,"title":"2.1 抽象TraceRecoder","slug":"_2-1-抽象tracerecoder","link":"#_2-1-抽象tracerecoder","children":[]},{"level":3,"title":"2.2 使用门面","slug":"_2-2-使用门面","link":"#_2-2-使用门面","children":[]},{"level":3,"title":"2.3 使用示例","slug":"_2-3-使用示例","link":"#_2-3-使用示例","children":[]}]}],"git":{"createdTime":1724750998000,"updatedTime":1724845190000,"contributors":[{"name":"yihui","email":"bangzewu@126.com","commits":2}]},"readingTime":{"minutes":9.37,"words":2812},"filePathRelative":"column/app/trace-watch-dog/07.便捷的使用封装.md","localizedDate":"2024年8月27日","excerpt":"<p>接上文，我们现在实现的耗时分布记录工具路<code>TraceRecoder</code>已基本成型，接下来我们将重点放在使用层面的优化上，看一下如何给调用者提供简洁、舒适的使用体验</p>\\n<h2> 1. 使用侧的问题分析</h2>\\n<p>现来看一下前面测试用例中的使用case</p>\\n<div class=\\"language-java line-numbers-mode\\" data-ext=\\"java\\"><pre class=\\"language-java\\"><code><span class=\\"token annotation punctuation\\">@Test</span>\\n<span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">void</span> <span class=\\"token function\\">testCost2</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token keyword\\">try</span> <span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">TraceRecorder</span> recorder <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">TraceRecorder</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token function\\">randSleep</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"前置\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">20</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        recorder<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sync</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-&gt;</span> <span class=\\"token function\\">randSleep</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"task1\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">200</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"task1\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        recorder<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">async</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">-&gt;</span> <span class=\\"token function\\">randSleep</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"task2\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">100</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"task2\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{},"autoDesc":true}');export{n as data};
